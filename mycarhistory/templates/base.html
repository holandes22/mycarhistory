<!DOCTYPE html>
{% load staticfiles %}
{% load browserid %}
<html lang="en">
  <head>
    <meta charset=utf-8>
    <title>{% block page_title %}My Car History{% endblock %}</title>
    <link rel="stylesheet" href="{{ STATIC_URL}}libs/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="{{ STATIC_URL}}libs/css/bootstrap-theme.min.css"/>
    {% browserid_css %}
    {% block extra_css %}{% endblock extra_css %}
  </head>
  <body>
    <div id="emberRoot"></div>
    <script type="text/javascript">
        {% if user.is_authenticated %}
          var CURRENT_USER_AUTH_TOKEN = "{{ user.get_auth_token }}";
        {% endif %}
    </script>

    {% browserid_info %}
    <script type="text/x-handlebars" id="application">
    <nav class="navbar navbar-inverse navbar-static-top" role="navigation">
      <div class="navbar-header">
        <a class="navbar-brand" href="#">My Car History</a>
      </div>
      <div>
        <ul class="nav navbar-nav">
          <li>
            {% verbatim %}
              {{link-to "Cars" "cars"}}
            {% endverbatim %}
          </li>
          <li><a>About</a></li>
          <li class="divider-vertical"></li>
        </ul>
      </div>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
          {% if user.is_authenticated %}
            <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-user">
            {{ user.email }} <b class="caret"></b></a>
            <ul class="dropdown-menu pull-right">
              <li><a href="#">Profile</a></li>
              <li class="divider"></li>
              <li>{% browserid_logout text="Log Out" %}</li>
            </ul>
          {% else %}
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Log In <b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li>{% browserid_login text="Log in with Persona" color="orange" %}</li>
            </ul>
          {% endif %}
        </li>
      </ul>
    </nav>
      {% verbatim %}
        {{outlet}}
      {% endverbatim %}
    </script>
    {% block page_content %}{% endblock page_content%}

    {% comment %}
    ===============
    JavaScript Libs
    ===============
    {% endcomment %}

    <script src="{% static 'libs/js/jquery-2.0.3.min.js' %}"></script>
    <script src="{% static 'libs/js/bootstrap.min.js' %}"></script>
    <script src="{% static 'libs/js/handlebars-1.0.0.js' %}"></script>
    <script src="{% static 'libs/js/ember.js' %}"></script>
    <script src="{% static 'libs/js/ember-data.js' %}"></script>
    <script src="{% static 'libs/js/ember-data-django-rest-adapter.js' %}"></script>
    <script src="{% static 'libs/js/moment.min.js' %}"></script>
    {% browserid_js %}
    {% comment %}
    =========
    Ember App
    =========
    {% endcomment %}
    <script src="{% static 'app/definitions.js' %}"></script>
    <script src="{% static 'app/app.js' %}"></script>
    <script src="{% static 'app/models/car.js' %}"></script>
    <script src="{% static 'app/models/treatment.js' %}"></script>
    <script src="{% static 'app/controllers/car.js' %}"></script>
    <script src="{% static 'app/controllers/errors.js' %}"></script>
    <script src="{% static 'app/views/car.js' %}"></script>
    <script src="{% static 'app/adapters/django_rest.js' %}"></script>
    <script src="{% static 'app/router.js' %}"></script>
    {% block extra_js %}{% endblock extra_js %}
  </body>
</html>
